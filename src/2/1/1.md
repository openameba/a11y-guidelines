---
layout: single
title: キーボード、タッチデバイスで操作できる
number: 2.1.1
level: A
tags: sc
permalink: "{{ number | scNumberToPath }}/"
---

# 2.1.1 キーボード、タッチデバイスで操作できる

キーボードショートカット・マウスホバー・タッチのフリックのみなど、特定の操作に依存した機能では、他のデバイスから使用できないことが多くある。キーボード・マウス・タッチそれぞれの操作を担保し、様々なデバイスの操作をカバーする。

ただし、次のような場合は例外とする。

- キーボードのショートカットなどで操作が代替可能など、別の手段で操作できれば問題なし
- 手書き入力など、マウスカーソルの移動や、タッチしながらの移動などに依存している機能は除外する

## レビュー・テスト方法

1. ESlintによる自動チェック
 - [eslint-plugin-jsx-a11y/interactive-supports-focus](https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/interactive-supports-focus.md)
 - [eslint-plugin-jsx-a11y/mouse-events-have-key-events](https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/mouse-events-have-key-events.md)
2. コードレビューによるチェック
3. QAテスト（マウスと同じ操作がキーボードでできるかをテストする）

## 実装方法

### Web

#### 良い実装例

フォーカスを受け取れる要素の使用、`tabindex` 属性の付与、`focus` 擬似クラスの併用などを行なっている。

```html
<button type="button" onclick="..." tabindex="1">
  content...
</button>
```

#### 悪い実装例

フォーカスを受け取れない要素を利用したコンテンツの出し分けなどをしている。

```html
<div onclick="...">
  content...
</div>
```

### Android

キーボードの矢印キーを使用してアプリのフォーカスを移動することも可能です。

どのビューに対してフォーカスを合わせるかを指定する。
想定したものと異なっていた場合は、以下の属性を付与することで次のフォーカスが当たるビューを指定することができる。

- android:nextFocusUp
- android:nextFocusDown
- android:nextFocusLeft
- android:nextFocusRight

```
<Constraintlayout ...>
  <Button
    android:id="@+id/button"
    android:nextFocusLeft="@+id/editText"
    ... />
  <ImageView
    android:id="@+id/imageview"
    android:nextFocusDown="@+id/button"
    ... />
  <EditText
    android:id="@id/editText1"
    android:nextFocusUp="@+id/imageview"
    ...  />
</Constraintlayout>
```

### iOS

isAccessibilityElementにtrueを設定することでフォーカスが受け取れるようになります。

```
hogeView.isAccessibilityElement = true
```

## 参考文献

- [達成基準 2.1.1: キーボードを理解する](https://waic.jp/docs/WCAG21/Understanding/keyboard.html)
- [H91: HTML のフォームコントロール及びリンクを使用する | WCAG 2.1 達成方法集](https://waic.jp/docs/WCAG21/Techniques/html/H91)
- [キーボード ナビゲーションのサポート | Android Developers](https://developer.android.com/training/keyboard-input/navigation?hl=ja#Tab)
- [isAccessibilityElement | Apple Developer Documentation](https://developer.apple.com/documentation/objectivec/nsobject/1615141-isaccessibilityelement)
